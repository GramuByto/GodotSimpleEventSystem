[gd_scene load_steps=17 format=3 uid="uid://dvr2val5qh6cl"]

[ext_resource type="PackedScene" uid="uid://blthj6kwtmhb0" path="res://sample/target_dummy/target_dummy.glb" id="1_66n2e"]
[ext_resource type="Script" path="res://sample/scripts/enemy_script.gd" id="2_ugnhl"]
[ext_resource type="Script" path="res://sample/scripts/animation_script.gd" id="3_a0bgb"]
[ext_resource type="Theme" uid="uid://6d5cloc5p1o4" path="res://sample/sample_theme.tres" id="3_ay5m6"]
[ext_resource type="Script" path="res://sample/scripts/health/health_script.gd" id="3_gysqa"]
[ext_resource type="Script" path="res://sample/scripts/health/health_bar_script.gd" id="5_0knwe"]
[ext_resource type="Script" path="res://addons/simple_event_system/simple_event_system.gd" id="5_f7dxk"]

[sub_resource type="Animation" id="Animation_o8euj"]
resource_name = "ARM_training_dummy|ARM_training_dummy|pushed|ARM_training_d"
tracks/0/type = "rotation_3d"
tracks/0/imported = true
tracks/0/enabled = true
tracks/0/path = NodePath("ARM_training_dummy/Skeleton3D:DEF-body")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = PackedFloat32Array(0, 1, 0.707107, 0, 0, 0.707107, 0.0333333, 1, 0.705933, -0.000709885, -0.000165439, 0.708279, 0.0666667, 1, 0.698138, -0.00538722, -0.00125549, 0.715942, 0.1, 1, 0.686642, -0.012178, -0.00283808, 0.726888, 0.133333, 1, 0.676036, -0.0183347, -0.0042729, 0.736628, 0.166667, 1, 0.671351, -0.0210221, -0.0048992, 0.740825, 0.2, 1, 0.672301, -0.0206248, -0.00495115, 0.739974, 0.233333, 1, 0.673835, -0.0194997, -0.00512882, 0.738607, 0.266667, 1, 0.676652, -0.0177659, -0.00539019, 0.736069, 0.3, 1, 0.680259, -0.0155346, -0.00572631, 0.732785, 0.333333, 1, 0.68446, -0.0129196, -0.00611993, 0.72891, 0.366667, 1, 0.689064, -0.0100341, -0.00655387, 0.724601, 0.4, 1, 0.693883, -0.00699068, -0.00701108, 0.72002, 0.433333, 1, 0.698736, -0.00390118, -0.00747473, 0.71533, 0.466667, 1, 0.70345, -0.00087609, -0.00792821, 0.7107, 0.5, 1, 0.707859, 0.00197546, -0.00835522, 0.706301, 0.533333, 1, 0.711805, 0.00454573, -0.00873965, 0.702308, 0.566667, 1, 0.715135, 0.00672825, -0.00906571, 0.698895, 0.6, 1, 0.717699, 0.00841745, -0.00931771, 0.696241, 0.633333, 1, 0.719348, 0.00950812, -0.00948005, 0.69452, 0.666667, 1, 0.71879, 0.0099103, -0.00952074, 0.695091, 0.7, 1, 0.718244, 0.00942718, -0.00905846, 0.695668, 0.733333, 1, 0.717708, 0.00815844, -0.00786356, 0.696252, 0.766667, 1, 0.715459, 0.00641139, -0.00617966, 0.698598, 0.8, 1, 0.712925, 0.00445321, -0.00429225, 0.701213, 0.833333, 1, 0.710468, 0.00256526, -0.00247254, 0.703721, 0.866667, 1, 0.708458, 0.00102904, -0.000991849, 0.705752, 0.9, 1, 0.707273, 0.000126065, -0.000121508, 0.706941, 1, 1, 0.707107, 8.23181e-11, -8.23181e-11, 0.707107)
tracks/1/type = "rotation_3d"
tracks/1/imported = true
tracks/1/enabled = true
tracks/1/path = NodePath("ARM_training_dummy/Skeleton3D:DEF-hands")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = PackedFloat32Array(0, 1, -9.36322e-08, 6.88982e-08, 0.754922, 0.655815, 0.0333333, 1, -0.00254244, -0.00215943, 0.75474, 0.656016, 0.0666667, 1, -0.0211027, -0.017906, 0.754171, 0.656094, 0.1, 1, -0.0536902, -0.0455513, 0.75264, 0.654657, 0.133333, 1, -0.0952758, -0.0809744, 0.749275, 0.650348, 0.166667, 1, -0.140597, -0.119492, 0.742369, 0.644083, 0.2, 1, -0.184091, -0.156458, 0.733095, 0.63577, 0.233333, 1, -0.220569, -0.187461, 0.723244, 0.626997, 0.266667, 1, -0.245477, -0.20863, 0.715389, 0.620027, 0.3, 1, -0.254304, -0.216941, 0.713376, 0.615922, 0.333333, 1, -0.249145, -0.212494, 0.715193, 0.617472, 0.366667, 1, -0.234915, -0.199753, 0.719345, 0.622461, 0.4, 1, -0.212728, -0.18031, 0.725642, 0.62903, 0.433333, 1, -0.183966, -0.155509, 0.733258, 0.63585, 0.466667, 1, -0.150409, -0.12659, 0.740647, 0.64249, 0.5, 1, -0.113938, -0.0951751, 0.746906, 0.648145, 0.533333, 1, -0.0766477, -0.0630575, 0.751387, 0.652354, 0.566667, 1, -0.0407118, -0.0321443, 0.754129, 0.654675, 0.6, 1, -0.00830488, -0.00424746, 0.754817, 0.655869, 0.633333, 1, 0.0185977, 0.0188923, 0.754601, 0.655648, 0.666667, 1, 0.0381657, 0.0357437, 0.753996, 0.654795, 0.7, 1, 0.0487246, 0.0448513, 0.753514, 0.654087, 0.733333, 1, 0.049593, 0.0455714, 0.753479, 0.654014, 0.766667, 1, 0.0459513, 0.0422199, 0.753682, 0.65427, 0.8, 1, 0.0396359, 0.03641, 0.753994, 0.654673, 0.833333, 1, 0.0316116, 0.0290326, 0.754323, 0.655099, 0.866667, 1, 0.0228485, 0.0209809, 0.754599, 0.655453, 0.9, 1, 0.014324, 0.0131518, 0.754784, 0.655685, 0.933333, 1, 0.00701974, 0.00644509, 0.754879, 0.655795, 0.966667, 1, 0.00191814, 0.00176124, 0.754912, 0.655821, 1, 1, -9.36322e-08, 6.88982e-08, 0.754922, 0.655815)
tracks/2/type = "rotation_3d"
tracks/2/imported = true
tracks/2/enabled = true
tracks/2/path = NodePath("ARM_training_dummy/Skeleton3D:DEF-sword")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = PackedFloat32Array(0, 1, 1.82941e-07, -6.00997e-08, -0.609704, 0.792629, 0.0333333, 1, 0.000979358, -0.000753259, -0.609704, 0.792628, 0.0666667, 1, 0.00804604, -0.00618907, -0.609673, 0.792588, 0.1, 1, 0.0202157, -0.0155502, -0.609506, 0.792371, 0.133333, 1, 0.0354279, -0.0272517, -0.609095, 0.791837, 0.166667, 1, 0.0516164, -0.0397041, -0.60841, 0.790947, 0.2, 1, 0.0667295, -0.0513294, -0.60754, 0.789815, 0.233333, 1, 0.0787515, -0.060577, -0.606687, 0.788707, 0.266667, 1, 0.0857047, -0.0659255, -0.60613, 0.787982, 0.3, 1, 0.0845835, -0.065063, -0.606223, 0.788103, 0.333333, 1, 0.0693089, -0.0533135, -0.607369, 0.789593, 0.366667, 1, 0.0422787, -0.0325214, -0.608836, 0.791501, 0.4, 1, 0.00727379, -0.00559505, -0.609679, 0.792596, 0.466667, 1, -0.0704047, 0.0541566, -0.607294, 0.789496, 0.5, 1, -0.10482, 0.0806296, -0.604349, 0.785668, 0.533333, 1, -0.131152, 0.100885, -0.6013, 0.781703, 0.566667, 1, -0.145941, 0.11226, -0.59928, 0.779078, 0.6, 1, -0.147285, 0.113294, -0.599086, 0.778825, 0.633333, 1, -0.142266, 0.109433, -0.599803, 0.779757, 0.666667, 1, -0.133023, 0.102324, -0.601057, 0.781387, 0.7, 1, -0.120378, 0.0925966, -0.602632, 0.783435, 0.733333, 1, -0.105161, 0.0808918, -0.604314, 0.785622, 0.766667, 1, -0.0882366, 0.0678732, -0.605915, 0.787702, 0.833333, 1, -0.0528927, 0.0406861, -0.608345, 0.790862, 0.866667, 1, -0.036356, 0.0279657, -0.609062, 0.791795, 0.9, 1, -0.0218513, 0.0168085, -0.609473, 0.792328, 0.933333, 1, -0.0103313, 0.00794708, -0.609652, 0.792562, 0.966667, 1, -0.00273709, 0.0021055, -0.609701, 0.792624, 1, 1, 1.82941e-07, -6.00997e-08, -0.609704, 0.792629)
tracks/3/type = "rotation_3d"
tracks/3/imported = true
tracks/3/enabled = true
tracks/3/path = NodePath("ARM_training_dummy/Skeleton3D:DEF-shield")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = PackedFloat32Array(0, 1, -0.52607, -0.486621, -0.512002, 0.473608, 0.0333333, 1, -0.525704, -0.487236, -0.512352, 0.473003, 0.0666667, 1, -0.522145, -0.49083, -0.515789, 0.469482, 0.1, 1, -0.515958, -0.49733, -0.521628, 0.462985, 0.133333, 1, -0.507787, -0.505669, -0.529101, 0.454425, 0.166667, 1, -0.498415, -0.514909, -0.537358, 0.444632, 0.2, 1, -0.488676, -0.524162, -0.545598, 0.434481, 0.233333, 1, -0.479458, -0.532606, -0.553094, 0.424898, 0.266667, 1, -0.471694, -0.539495, -0.55919, 0.416842, 0.3, 1, -0.466338, -0.544131, -0.563283, 0.411294, 0.333333, 1, -0.464344, -0.545833, -0.564784, 0.409231, 0.366667, 1, -0.471116, -0.539999, -0.559636, 0.416244, 0.4, 1, -0.488519, -0.524308, -0.545728, 0.434317, 0.433333, 1, -0.512003, -0.5014, -0.525278, 0.45884, 0.466667, 1, -0.537111, -0.474405, -0.500987, 0.485246, 0.5, 1, -0.559922, -0.447254, -0.476369, 0.509435, 0.533333, 1, -0.577367, -0.424496, -0.455607, 0.528085, 0.566667, 1, -0.587126, -0.410892, -0.443146, 0.538584, 0.6, 1, -0.587633, -0.410533, -0.441321, 0.539801, 0.633333, 1, -0.58533, -0.413446, -0.443182, 0.538554, 0.666667, 1, -0.582547, -0.417359, -0.449074, 0.533651, 0.7, 1, -0.577475, -0.424348, -0.455472, 0.528201, 0.733333, 1, -0.571294, -0.432634, -0.463044, 0.521576, 0.766667, 1, -0.564317, -0.441696, -0.471309, 0.514119, 0.8, 1, -0.556886, -0.451028, -0.479801, 0.506204, 0.833333, 1, -0.549384, -0.460137, -0.488071, 0.498234, 0.866667, 1, -0.542224, -0.468553, -0.495696, 0.490649, 0.9, 1, -0.535848, -0.475831, -0.502275, 0.483912, 0.933333, 1, -0.53072, -0.481545, -0.50743, 0.478503, 0.966667, 1, -0.527599, -0.485463, -0.510496, 0.47472, 1, 1, -0.52607, -0.486621, -0.512002, 0.473608)
tracks/4/type = "rotation_3d"
tracks/4/imported = true
tracks/4/enabled = true
tracks/4/path = NodePath("ARM_training_dummy/Skeleton3D:DEF-head")
tracks/4/interp = 1
tracks/4/loop_wrap = true
tracks/4/keys = PackedFloat32Array(0, 1, -0.096037, 0.00358584, 0.0372094, 0.994676, 0.0333333, 1, -0.0963745, 0.00173596, 0.0370733, 0.994653, 0.0666667, 1, -0.0987633, -0.0114099, 0.0361024, 0.99439, 0.1, 1, -0.102734, -0.0334741, 0.0344579, 0.993548, 0.166667, 1, -0.112071, -0.0864786, 0.0304306, 0.989462, 0.2, 1, -0.115856, -0.108439, 0.0287302, 0.986911, 0.233333, 1, -0.118083, -0.121495, 0.0277103, 0.985154, 0.266667, 1, -0.118259, -0.123176, 0.0275541, 0.984928, 0.3, 1, -0.11723, -0.121985, 0.0276726, 0.985196, 0.333333, 1, -0.115381, -0.119652, 0.0278565, 0.985695, 0.366667, 1, -0.112926, -0.116233, 0.0281253, 0.986381, 0.4, 1, -0.110076, -0.111786, 0.0284743, 0.987207, 0.433333, 1, -0.107045, -0.106363, 0.0288984, 0.988126, 0.466667, 1, -0.104047, -0.10002, 0.029393, 0.989094, 0.5, 1, -0.101295, -0.0928122, 0.0299532, 0.990065, 0.533333, 1, -0.0990031, -0.084794, 0.0305744, 0.990996, 0.566667, 1, -0.0973843, -0.07602, 0.0312518, 0.991847, 0.6, 1, -0.0965549, -0.0665467, 0.0319802, 0.992586, 0.633333, 1, -0.0960456, -0.0565437, 0.0327429, 0.99323, 0.666667, 1, -0.0957311, -0.0463299, 0.0335151, 0.993763, 0.7, 1, -0.0955744, -0.0362352, 0.0342726, 0.994172, 0.733333, 1, -0.0955401, -0.0265912, 0.0349912, 0.994455, 0.766667, 1, -0.0955937, -0.0177297, 0.0356473, 0.994624, 0.8, 1, -0.0957236, -0.00998318, 0.0362175, 0.994699, 0.833333, 1, -0.095866, -0.00368206, 0.0366846, 0.994711, 0.866667, 1, -0.0960129, 0.000843429, 0.0370161, 0.994691, 0.9, 1, -0.0960817, 0.00326395, 0.0372037, 0.994673, 1, 1, -0.096037, 0.00358584, 0.0372094, 0.994676)

[sub_resource type="AnimationLibrary" id="AnimationLibrary_40pn1"]
_data = {
"ARM_training_dummy|ARM_training_dummy|pushed|ARM_training_d": SubResource("Animation_o8euj")
}

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_bju65"]
animation = &"ARM_training_dummy|ARM_training_dummy|pushed|ARM_training_d"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_fy0ko"]
animation = &"ARM_training_dummy|ARM_training_dummy|pushed|ARM_training_d"

[sub_resource type="AnimationNodeTimeScale" id="AnimationNodeTimeScale_07yd0"]

[sub_resource type="AnimationNodeTimeScale" id="AnimationNodeTimeScale_p6oy3"]

[sub_resource type="AnimationNodeOneShot" id="AnimationNodeOneShot_5wxgc"]

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_d4ciq"]
graph_offset = Vector2(-475.892, -2.0659)
nodes/Animation/node = SubResource("AnimationNodeAnimation_fy0ko")
nodes/Animation/position = Vector2(-740, 240)
"nodes/Animation 2/node" = SubResource("AnimationNodeAnimation_bju65")
"nodes/Animation 2/position" = Vector2(-740, 100)
nodes/TimeScale/node = SubResource("AnimationNodeTimeScale_p6oy3")
nodes/TimeScale/position = Vector2(-100, 60)
"nodes/TimeScale 2/node" = SubResource("AnimationNodeTimeScale_07yd0")
"nodes/TimeScale 2/position" = Vector2(-100, 200)
nodes/hit/node = SubResource("AnimationNodeOneShot_5wxgc")
nodes/hit/position = Vector2(100, 100)
nodes/output/position = Vector2(300, 100)
node_connections = [&"TimeScale", 0, &"Animation 2", &"TimeScale 2", 0, &"Animation", &"hit", 0, &"TimeScale", &"hit", 1, &"TimeScale 2", &"output", 0, &"hit"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_2wxqj"]

[node name="target_dummy" node_paths=PackedStringArray("OnInitialize") instance=ExtResource("1_66n2e")]
script = ExtResource("2_ugnhl")
OnInitialize = NodePath("OnInitialize")

[node name="Skeleton3D" parent="ARM_training_dummy" index="0"]
bones/2/rotation = Quaternion(-9.36322e-08, 6.88982e-08, 0.754922, 0.655815)
bones/3/rotation = Quaternion(1.82941e-07, -6.00997e-08, -0.609704, 0.792629)
bones/4/rotation = Quaternion(0.52607, 0.486621, 0.512002, -0.473608)

[node name="AnimationPlayer" parent="." index="1" node_paths=PackedStringArray("anim_tree")]
script = ExtResource("3_a0bgb")
anim_tree = NodePath("AnimationTree")

[node name="AnimationTree" type="AnimationTree" parent="AnimationPlayer" index="0"]
root_node = NodePath("../..")
libraries = {
"": SubResource("AnimationLibrary_40pn1")
}
tree_root = SubResource("AnimationNodeBlendTree_d4ciq")
anim_player = NodePath("..")
parameters/TimeScale/scale = 0.0
"parameters/TimeScale 2/scale" = 4.0
parameters/hit/active = false
parameters/hit/internal_active = false
parameters/hit/request = 0

[node name="CanvasLayer" type="CanvasLayer" parent="." index="2"]

[node name="ProgressBar" type="ProgressBar" parent="CanvasLayer" index="0" node_paths=PackedStringArray("health_class")]
anchors_preset = 10
anchor_right = 1.0
offset_left = 87.0
offset_top = 14.0
offset_right = -87.0
offset_bottom = 41.0
grow_horizontal = 2
theme = ExtResource("3_ay5m6")
value = 100.0
script = ExtResource("5_0knwe")
health_class = NodePath("../../Health")

[node name="Health" type="Node" parent="." index="3" node_paths=PackedStringArray("OnTakeDamage", "OnAddHealth")]
script = ExtResource("3_gysqa")
OnTakeDamage = NodePath("OnTakeDamage")
OnAddHealth = NodePath("OnAddHealth")

[node name="OnTakeDamage" type="Node" parent="Health" index="0" node_paths=PackedStringArray("_node", "_callable_nodes")]
script = ExtResource("5_f7dxk")
_node = NodePath("../../CanvasLayer/ProgressBar")
_type_name = "health_bar_script.gd"
_function_name = "update_health()"
_callable_nodes = [NodePath("../../CanvasLayer/ProgressBar"), NodePath("../../AnimationPlayer")]
_callable_values = [["health_bar_script.gd", "update_health()", []], ["animation_script.gd", "play_oneshot(parameter)", ["hit"]]]

[node name="OnAddHealth" type="Node" parent="Health" index="1" node_paths=PackedStringArray("_node", "_callable_nodes")]
script = ExtResource("5_f7dxk")
_node = NodePath("../../CanvasLayer/ProgressBar")
_type_name = "health_bar_script.gd"
_function_name = "update_health()"
_callable_nodes = [NodePath("../../CanvasLayer/ProgressBar")]
_callable_values = [["health_bar_script.gd", "update_health()", []]]

[node name="OnInitialize" type="Node" parent="." index="4" node_paths=PackedStringArray("_node", "_callable_nodes")]
script = ExtResource("5_f7dxk")
_node = NodePath("../Health")
_type_name = "health_script.gd"
_function_name = "set_health(val)"
_args = [100]
_callable_nodes = [NodePath("../Health")]
_callable_values = [["health_script.gd", "set_health(val)", [100]]]

[node name="Area3D" type="Area3D" parent="." index="5" groups=["enemy"]]

[node name="CollisionShape3D" type="CollisionShape3D" parent="Area3D" index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)
shape = SubResource("CapsuleShape3D_2wxqj")
